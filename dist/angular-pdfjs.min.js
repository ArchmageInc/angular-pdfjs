!function(a,b,c){"use strict";c.module("angular-pdfjs",[]).run(function(){PDFJS.verbosity=PDFJS.VERBOSITY_LEVELS.errors}).directive("pdfViewer",function(){return{restrict:"A",controller:["$scope","$q",function(d,e){function f(){c.extend(S,{page:0,rotation:0,offsetX:0,offsetY:0,scale:1,width:0,height:0}),c.extend(T,S,{page:1}),c.extend(U,T),M=null,R.viewport=null}function g(){M=null,c.extend(S,T),c.extend(U,S),d.$applyAsync()}function h(){return L&&J&&!M&&!c.equals(S,T)}function i(a){c.extend(R,{page:1,rotation:a.rotation,offsetX:a.offsetX,offsetY:a.offsetY,scale:a.scale,width:a.width,height:a.height},R),T.width=T.width||R.width,T.height=T.height||R.height}function j(){return h()?M=L.getPage(T.page).then(function(a){var b,c;i(a.getViewport(1)),K=a,b=[0,0,R.width,R.height],c=new PDFJS.PageViewport(b,T.scale,T.rotation,T.offsetX,T.offsetY),k(),M=a.render({canvasContext:J,viewport:c}).then(g)}):W}function k(){var a=T.rotation%180?T.height:T.width,b=T.rotation%180?T.width:T.height;H.css({width:a+"px",height:b+"px"}),I.attr("width",a),I.attr("height",b)}function l(){return n(S.page-1)}function m(){return n(S.page+1)}function n(a){return a=0===a?1:a,a=a>Q?Q:a,U.page=a,a=parseInt(a),isNaN(a)?W:(T.page=a,j())}function o(a){return U.width=a,a=parseFloat(a),!isNaN(a)&&a>0?(T.width=a,j()):W}function p(a){return U.height=a,a=parseFloat(a),!isNaN(a)&&a>0?(T.height=a,j()):W}function q(a){return a=isNaN(parseFloat(a))?N:parseFloat(a),s(S.scale+a)}function r(a){return a=isNaN(parseFloat(a))?N:parseFloat(a),s(S.scale-a)}function s(a){return U.scale=a,a=parseFloat(a),!isNaN(a)&&a>0?(T.scale=a,j()):W}function t(a){return a=isNaN(parseFloat(a))?O:parseFloat(a),x(S.offsetX+a,S.offsetY)}function u(a){return a=isNaN(parseFloat(a))?O:parseFloat(a),x(S.offsetX-a,S.offsetY)}function v(a){return a=isNaN(parseFloat(a))?O:parseFloat(a),x(S.offsetX,S.offsetY+a)}function w(a){return a=isNaN(parseFloat(a))?O:parseFloat(a),x(S.offsetX,S.offsetY-a)}function x(a,b){var c=S.rotation%180?S.height:S.width,d=S.rotation%180?S.width:S.height,e=c-S.scale*c,f=d-S.scale*d;return a=e>a?e:a,a=a>0?0:a,b=f>b?f:b,b=b>0?0:b,U.offsetX=a,U.offsetY=b,a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b)?W:(T.offsetX=a,T.offsetY=b,j())}function y(a){return U.offsetX=a,A({x:a,y:U.offsetY})}function z(a){return U.offsetY=a,A({x:U.offsetX,y:a})}function A(a){return a=a||{},x(a.x,a.y)}function B(){return D(S.rotation-P)}function C(){return D(S.rotation+P)}function D(a){return U.rotation=a,a=parseFloat(a),isNaN(a)?W:(T.rotation=90*b.round(a/90),j())}function E(a){return a?M=PDFJS.getDocument(a).then(function(a){return f(),L=a,Q=L.numPages,j()}):W}function F(a,b){H=a,I=b,J=I[0].getContext("2d")}function G(){return L}var H,I,J,K,L,M,N=.25,O=10,P=90,Q=0,R={},S={},T={},U={offset:{}},V=e.defer(),W=V.promise;a.defineProperties(U.offset,{x:{set:y,get:function(){return U.offsetX}},y:{set:z,get:function(){return U.offsetY}}}),a.defineProperties(this,{setHeight:{value:p},setWidth:{value:o},zoomIn:{value:q},zoomOut:{value:r},zoomTo:{value:s},panLeft:{value:t},panRight:{value:u},panUp:{value:v},panDown:{value:w},panTo:{value:x},rotateLeft:{value:B},rotateRight:{value:C},rotateTo:{value:D},nextPage:{value:m},previousPage:{value:l},goToPage:{value:n},loadDocument:{value:E},setElements:{value:F},getDocument:{value:G},total:{set:c.noop,get:function(){return Q}},page:{set:n,get:function(){return U.page}},width:{set:o,get:function(){return U.width}},height:{set:p,get:function(){return U.height}},zoom:{set:s,get:function(){return U.scale}},rotation:{set:D,get:function(){return U.rotation}},offsetX:{set:y,get:function(){return U.offsetX}},offsetY:{set:z,get:function(){return U.offsetY}},offset:{set:A,get:function(){return U.offset}},loading:{set:c.noop,get:function(){return M}}}),V.resolve(),f()}],link:function(a,b,d,e){function f(a){return{x:a.originalEvent&&a.originalEvent.x||a.clientX||a.touches&&a.touches[0].clientX,y:a.originalEvent&&a.originalEvent.y||a.clientY||a.touches&&a.touches[0].clientY}}function g(a){e.loadDocument(a)}function h(a){a.preventDefault(),a.stopImmediatePropagation();var b=a.originalEvent&&a.originalEvent.wheelDelta||a.wheelDelta;e.zoomIn(b/100)}function i(a){var b=f(a);a.preventDefault(),a.stopImmediatePropagation(),l={x:b.x-p.x,y:b.y-p.y}}function j(a){a.preventDefault(),a.stopImmediatePropagation(),l=null}function k(a){var b=f(a);a.preventDefault(),a.stopImmediatePropagation(),l&&(e.offset=p={x:b.x-l.x,y:b.y-l.y})}var l=null,m=c.element("<canvas></canvas>"),n=c.element("<div></div>"),o=c.extend({mouseZoom:!0,mousePan:!0},a.$eval(d.pdfViewer)),p={x:0,y:0};e.setElements(n,m),n.append(m),b.append(n),n.css({overflow:"hidden"}),d.id&&(a[d.$normalize(d.id)]=e),o.mouseZoom&&n.on("wheel",h),o.mousePan&&(m.css({cursor:"move"}),n.on("touchstart mousedown",i),n.on("touchmove mousemove",k),n.on("touchend touchleave touchcancel mouseup mouseleave",j)),a.$on("$destroy",function(){n.off()}),a.$watch(d.pdfUrl,g)}}})}(Object,Math,angular);
//# sourceMappingURL=angular-pdfjs.min.js.map