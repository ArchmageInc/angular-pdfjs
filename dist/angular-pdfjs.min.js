!function(a,b,c){"use strict";c.module("angular-pdfjs",[]).run(function(){PDFJS.verbosity=PDFJS.VERBOSITY_LEVELS.errors}).directive("pdfViewer",function(){return{restrict:"A",controller:["$scope","$q",function(d,e){function f(){R=null,T=null,S=null,U=null}function g(){f(),c.extend($,{page:0,rotation:0,offsetX:0,offsetY:0,scale:1,width:0,height:0}),c.extend(_,$,{page:1}),c.extend(ab,_),Z.viewport=null}function h(){f(),c.extend($,_),c.extend(ab,$),d.$applyAsync()}function i(){return Q&&O&&!U&&!c.equals($,_)}function j(a){c.extend(Z,{page:1,rotation:a.rotation,offsetX:a.offsetX,offsetY:a.offsetY,scale:a.scale,width:a.width,height:a.height},Z),_.width=_.width||Z.width,_.height=_.height||Z.height}function k(a){return a?(U=e(function(b,c){R=PDFJS.getDocument(a),R.then(function(a){g(),Q=a,Y=Q.numPages,U=null,b(a)},function(a){g(),c(a)})}),U._loadState="document",U):cb}function l(a){return a&&i()?(U=e(function(b,c){T=a.getPage(_.page),T.then(function(a){f(),b(a)},c)}),U._loadState="page",U):cb}function m(a){if(a&&i()){var b,c;return j(a.getViewport(1)),P=a,b=[0,0,Z.width,Z.height],c=new PDFJS.PageViewport(b,_.scale,_.rotation,_.offsetX,_.offsetY),q(),U=e(function(b,d){S=a.render({canvasContext:O,viewport:c}).then(function(){h(),b()},d)}),U._loadState="render",U}return cb}function n(a){return k(a).then(l).then(m)["finally"](f)}function o(){return R?e.when(R.destroy()).then(g):cb}function p(){return l(Q).then(m)["finally"](f)}function q(){var a=_.rotation%180?_.height:_.width,b=_.rotation%180?_.width:_.height;M.css({width:a+"px",height:b+"px"}),N.attr("width",a),N.attr("height",b)}function r(){return t($.page-1)}function s(){return t($.page+1)}function t(a){return a=0===a?1:a,a=a>Y?Y:a,ab.page=a,a=parseInt(a),isNaN(a)?cb:(_.page=a,p())}function u(a){return ab.width=a,a=parseFloat(a),!isNaN(a)&&a>0?(_.width=a,p()):cb}function v(a){return ab.height=a,a=parseFloat(a),!isNaN(a)&&a>0?(_.height=a,p()):cb}function w(a){return a=isNaN(parseFloat(a))?V:parseFloat(a),y($.scale+a)}function x(a){return a=isNaN(parseFloat(a))?V:parseFloat(a),y($.scale-a)}function y(a){return ab.scale=a,a=parseFloat(a),!isNaN(a)&&a>0?(_.scale=a,p()):cb}function z(a){return a=isNaN(parseFloat(a))?W:parseFloat(a),D($.offsetX+a,$.offsetY)}function A(a){return a=isNaN(parseFloat(a))?W:parseFloat(a),D($.offsetX-a,$.offsetY)}function B(a){return a=isNaN(parseFloat(a))?W:parseFloat(a),D($.offsetX,$.offsetY+a)}function C(a){return a=isNaN(parseFloat(a))?W:parseFloat(a),D($.offsetX,$.offsetY-a)}function D(a,b){var c=$.rotation%180?$.height:$.width,d=$.rotation%180?$.width:$.height,e=c-$.scale*c,f=d-$.scale*d;return a=e>a?e:a,a=a>0?0:a,b=f>b?f:b,b=b>0?0:b,ab.offsetX=a,ab.offsetY=b,a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b)?cb:(_.offsetX=a,_.offsetY=b,p())}function E(a){return ab.offsetX=a,G({x:a,y:ab.offsetY})}function F(a){return ab.offsetY=a,G({x:ab.offsetX,y:a})}function G(a){return a=a||{},D(a.x,a.y)}function H(){return J($.rotation-X)}function I(){return J($.rotation+X)}function J(a){return ab.rotation=a,a=parseFloat(a),isNaN(a)?cb:(_.rotation=90*b.round(a/90),p())}function K(a,b){M=a,N=b,O=N[0].getContext("2d")}function L(){return Q}var M,N,O,P,Q,R,S,T,U,V=.25,W=10,X=90,Y=0,Z={},$={},_={},ab={offset:{}},bb=e.defer(),cb=bb.promise;a.defineProperties(ab.offset,{x:{set:E,get:function(){return ab.offsetX}},y:{set:F,get:function(){return ab.offsetY}}}),a.defineProperties(this,{setHeight:{value:v},setWidth:{value:u},zoomIn:{value:w},zoomOut:{value:x},zoomTo:{value:y},panLeft:{value:z},panRight:{value:A},panUp:{value:B},panDown:{value:C},panTo:{value:D},rotateLeft:{value:H},rotateRight:{value:I},rotateTo:{value:J},nextPage:{value:s},previousPage:{value:r},goToPage:{value:t},loadDocument:{value:n},cancelLoad:{value:o},setElements:{value:K},getDocument:{value:L},total:{set:c.noop,get:function(){return Y}},page:{set:t,get:function(){return ab.page}},width:{set:u,get:function(){return ab.width}},height:{set:v,get:function(){return ab.height}},zoom:{set:y,get:function(){return ab.scale}},rotation:{set:J,get:function(){return ab.rotation}},offsetX:{set:E,get:function(){return ab.offsetX}},offsetY:{set:F,get:function(){return ab.offsetY}},offset:{set:G,get:function(){return ab.offset}},loading:{set:c.noop,get:function(){return U}}}),bb.resolve(),g()}],link:function(a,b,d,e){function f(a){return{x:a.originalEvent&&a.originalEvent.x||a.clientX||a.touches&&a.touches[0].clientX,y:a.originalEvent&&a.originalEvent.y||a.clientY||a.touches&&a.touches[0].clientY}}function g(a){e.loadDocument(a)}function h(a){a.preventDefault(),a.stopImmediatePropagation();var b=a.originalEvent&&a.originalEvent.wheelDelta||a.wheelDelta;e.zoomIn(b/100)}function i(a){var b=f(a);a.preventDefault(),a.stopImmediatePropagation(),l={x:b.x-p.x,y:b.y-p.y}}function j(a){a.preventDefault(),a.stopImmediatePropagation(),l=null}function k(a){var b=f(a);a.preventDefault(),a.stopImmediatePropagation(),l&&(e.offset=p={x:b.x-l.x,y:b.y-l.y})}var l=null,m=c.element("<canvas></canvas>"),n=c.element("<div></div>"),o=c.extend({mouseZoom:!0,mousePan:!0},a.$eval(d.pdfViewer)),p={x:0,y:0};e.setElements(n,m),n.append(m),b.append(n),n.css({overflow:"hidden"}),d.id&&(a[d.$normalize(d.id)]=e),o.mouseZoom&&n.on("wheel",h),o.mousePan&&(m.css({cursor:"move"}),n.on("touchstart mousedown",i),n.on("touchmove mousemove",k),n.on("touchend touchleave touchcancel mouseup mouseleave",j)),a.$on("$destroy",function(){n.off()}),a.$watch(d.pdfUrl,g)}}})}(Object,Math,angular);
//# sourceMappingURL=angular-pdfjs.min.js.map